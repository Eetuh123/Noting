@model List<Noting.Controllers.ChartController.ChartPoint>
@{
    Layout = null;
}

<div class="w-full h-full">
    <canvas id="chart" class="w-full h-full block"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const labels  = @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.Select(p => p.Date)));
    const weights = @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.Select(p => p.Weight)));
    const reps    = @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model.Select(p => p.Reps)));

    new Chart(document.getElementById('chart'), {
      data: {
        labels,
        datasets: [
          { type:'bar',  label:'Weight (kg)', data:weights, backgroundColor:'#ED4E33' },
          { type:'line', label:'Reps', data:reps, yAxisID:'y1' }
        ]
      },
      options: {
        maintainAspectRatio: false,
        scales: {
          y:  { beginAtZero:true, title:{display:true,text:'Weight (kg)'} },
          y1: { beginAtZero:true, position:'right', title:{display:true,text:'Reps'} }
        },
        plugins:{ legend:{position:'top'} }
      }
    });
</script>
